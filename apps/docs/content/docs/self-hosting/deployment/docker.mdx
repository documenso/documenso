---
title: Docker
description: Run Documenso as a standalone Docker container with an external database. Ideal for container platforms like AWS ECS, Google Cloud Run, or Azure Container Instances.
---

import { Callout } from 'fumadocs-ui/components/callout';

## Prerequisites

For a self-contained setup that includes PostgreSQL, see [Docker Compose Deployment](/docs/self-hosting/deployment/docker-compose).

Before starting, ensure you have:

- [Docker](https://docs.docker.com/get-docker/) 20.10 or later installed
- A PostgreSQL 14+ database accessible from your Docker host
- SMTP credentials for sending emails
- At least 1GB of available RAM

Verify Docker is installed:

```bash
docker --version
```

## Pulling the Docker Image

Documenso publishes official images to both DockerHub and GitHub Container Registry.

**From DockerHub:**

```bash
docker pull documenso/documenso:latest
```

**From GitHub Container Registry:**

```bash
docker pull ghcr.io/documenso/documenso:latest
```

### Available Tags

| Tag       | Description                      |
| --------- | -------------------------------- |
| `latest`  | Latest stable release            |
| `x.y.z`   | Specific version (e.g., `1.5.0`) |
| `release` | Latest release branch build      |

<Callout type="info">
  Pin to a specific version tag in production to avoid unexpected updates.
</Callout>

## Environment Variables

### Required Variables

These variables must be set for Documenso to start:

| Variable                                | Description                                                                  | Default     |
| --------------------------------------- | ---------------------------------------------------------------------------- | ----------- |
| `NEXTAUTH_SECRET`                       | Secret key for session encryption. Generate with `openssl rand -base64 32`.  | -           |
| `NEXT_PRIVATE_ENCRYPTION_KEY`           | Primary encryption key (minimum 32 characters).                              | -           |
| `NEXT_PRIVATE_ENCRYPTION_SECONDARY_KEY` | Secondary encryption key (minimum 32 characters).                            | -           |
| `NEXT_PUBLIC_WEBAPP_URL`                | Public URL where Documenso is accessible (e.g., `https://sign.example.com`). | -           |
| `NEXT_PRIVATE_DATABASE_URL`             | PostgreSQL connection string.                                                | -           |
| `NEXT_PRIVATE_SMTP_TRANSPORT`           | Email transport: `smtp-auth`, `smtp-api`, `resend`, or `mailchannels`.       | `smtp-auth` |
| `NEXT_PRIVATE_SMTP_FROM_NAME`           | Sender name for outgoing emails.                                             | -           |
| `NEXT_PRIVATE_SMTP_FROM_ADDRESS`        | Sender email address.                                                        | -           |

### Database Connection

Documenso requires two database connection strings:

| Variable                           | Required     | Default                     | Description                        |
| ---------------------------------- | ------------ | --------------------------- | ---------------------------------- |
| `NEXT_PRIVATE_DATABASE_URL`        | Yes          | -                           | Pooled connection for app queries. |
| `NEXT_PRIVATE_DIRECT_DATABASE_URL` | When pooling | `NEXT_PRIVATE_DATABASE_URL` | Direct connection for migrations.  |

Connection string format:

```
postgresql://user:password@host:5432/database
```

If you're not using a connection pooler like PgBouncer, both variables can use the same connection string.

### SMTP Configuration

For `smtp-auth` transport:

| Variable                     | Required | Default     | Description                            |
| ---------------------------- | -------- | ----------- | -------------------------------------- |
| `NEXT_PRIVATE_SMTP_HOST`     | Yes      | `127.0.0.1` | SMTP server hostname.                  |
| `NEXT_PRIVATE_SMTP_PORT`     | Yes      | `587`       | SMTP server port (usually 587 or 465). |
| `NEXT_PRIVATE_SMTP_USERNAME` | Yes      | -           | SMTP username.                         |
| `NEXT_PRIVATE_SMTP_PASSWORD` | Yes      | -           | SMTP password.                         |
| `NEXT_PRIVATE_SMTP_SECURE`   | No       | `false`     | Set to `true` to force TLS.            |

See [Email Configuration](/docs/self-hosting/configuration/email) for other transport options.

### Optional Variables

| Variable                               | Description                                  | Default                   |
| -------------------------------------- | -------------------------------------------- | ------------------------- |
| `PORT`                                 | Port the application listens on              | `3000`                    |
| `NEXT_PRIVATE_SIGNING_LOCAL_FILE_PATH` | Path to signing certificate inside container | `/opt/documenso/cert.p12` |
| `NEXT_PRIVATE_SIGNING_PASSPHRASE`      | Passphrase for the signing certificate       | -                         |
| `NEXT_PUBLIC_UPLOAD_TRANSPORT`         | Document storage: `database` or `s3`         | `database`                |
| `NEXT_PUBLIC_DISABLE_SIGNUP`           | Disable public signups                       | `false`                   |
| `DOCUMENSO_DISABLE_TELEMETRY`          | Disable anonymous telemetry                  | `false`                   |

For the complete list, see [Environment Variables](/docs/self-hosting/configuration/environment).

## Running with Docker

### Basic Example

Run Documenso with the minimum required configuration:

```bash
docker run -d \
  --name documenso \
  -p 3000:3000 \
  -e NEXTAUTH_SECRET="$(openssl rand -base64 32)" \
  -e NEXT_PRIVATE_ENCRYPTION_KEY="your-encryption-key-min-32-chars" \
  -e NEXT_PRIVATE_ENCRYPTION_SECONDARY_KEY="your-secondary-key-min-32-chars" \
  -e NEXT_PUBLIC_WEBAPP_URL="https://sign.example.com" \
  -e NEXT_PRIVATE_DATABASE_URL="postgresql://user:password@db-host:5432/documenso" \
  -e NEXT_PRIVATE_SMTP_TRANSPORT="smtp-auth" \
  -e NEXT_PRIVATE_SMTP_HOST="smtp.example.com" \
  -e NEXT_PRIVATE_SMTP_PORT="587" \
  -e NEXT_PRIVATE_SMTP_USERNAME="your-smtp-user" \
  -e NEXT_PRIVATE_SMTP_PASSWORD="your-smtp-password" \
  -e NEXT_PRIVATE_SMTP_FROM_NAME="Documenso" \
  -e NEXT_PRIVATE_SMTP_FROM_ADDRESS="noreply@example.com" \
  documenso/documenso:latest
```

### With Signing Certificate

Mount a signing certificate for document signing:

```bash
docker run -d \
  --name documenso \
  -p 3000:3000 \
  -v /path/to/cert.p12:/opt/documenso/cert.p12:ro \
  -e NEXT_PRIVATE_SIGNING_PASSPHRASE="your-certificate-password" \
  -e NEXTAUTH_SECRET="your-secret" \
  -e NEXT_PRIVATE_ENCRYPTION_KEY="your-encryption-key-min-32-chars" \
  -e NEXT_PRIVATE_ENCRYPTION_SECONDARY_KEY="your-secondary-key-min-32-chars" \
  -e NEXT_PUBLIC_WEBAPP_URL="https://sign.example.com" \
  -e NEXT_PRIVATE_DATABASE_URL="postgresql://user:password@db-host:5432/documenso" \
  -e NEXT_PRIVATE_SMTP_TRANSPORT="smtp-auth" \
  -e NEXT_PRIVATE_SMTP_HOST="smtp.example.com" \
  -e NEXT_PRIVATE_SMTP_PORT="587" \
  -e NEXT_PRIVATE_SMTP_USERNAME="your-smtp-user" \
  -e NEXT_PRIVATE_SMTP_PASSWORD="your-smtp-password" \
  -e NEXT_PRIVATE_SMTP_FROM_NAME="Documenso" \
  -e NEXT_PRIVATE_SMTP_FROM_ADDRESS="noreply@example.com" \
  documenso/documenso:latest
```

<Callout type="warn">
  The signing certificate must have a password. Certificates without passwords cause "Failed to get
  private key bags" errors.
</Callout>

See [Signing Certificate Configuration](/docs/self-hosting/configuration/signing-certificate) for certificate setup instructions.

### Using an Environment File

For easier management, use an environment file:

Create `.env`:

```bash
NEXTAUTH_SECRET=your-secret-here
NEXT_PRIVATE_ENCRYPTION_KEY=your-encryption-key-min-32-chars
NEXT_PRIVATE_ENCRYPTION_SECONDARY_KEY=your-secondary-key-min-32-chars
NEXT_PUBLIC_WEBAPP_URL=https://sign.example.com
NEXT_PRIVATE_DATABASE_URL=postgresql://user:password@db-host:5432/documenso
NEXT_PRIVATE_DIRECT_DATABASE_URL=postgresql://user:password@db-host:5432/documenso
NEXT_PRIVATE_SMTP_TRANSPORT=smtp-auth
NEXT_PRIVATE_SMTP_HOST=smtp.example.com
NEXT_PRIVATE_SMTP_PORT=587
NEXT_PRIVATE_SMTP_USERNAME=your-smtp-user
NEXT_PRIVATE_SMTP_PASSWORD=your-smtp-password
NEXT_PRIVATE_SMTP_FROM_NAME=Documenso
NEXT_PRIVATE_SMTP_FROM_ADDRESS=noreply@example.com
NEXT_PRIVATE_SIGNING_PASSPHRASE=your-certificate-password
```

Run with the environment file:

```bash
docker run -d \
  --name documenso \
  -p 3000:3000 \
  --env-file .env \
  -v /path/to/cert.p12:/opt/documenso/cert.p12:ro \
  documenso/documenso:latest
```

## Health Checks

Documenso provides health check endpoints for monitoring:

| Endpoint                  | Purpose                                     |
| ------------------------- | ------------------------------------------- |
| `/api/health`             | Basic health check (returns 200 if running) |
| `/api/certificate-status` | Certificate configuration status            |

### Docker Health Check

Add a health check to your container:

```bash
docker run -d \
  --name documenso \
  -p 3000:3000 \
  --health-cmd="wget --no-verbose --tries=1 --spider http://localhost:3000/api/health || exit 1" \
  --health-interval=30s \
  --health-timeout=10s \
  --health-retries=3 \
  --env-file .env \
  documenso/documenso:latest
```

Check container health status:

```bash
docker inspect --format='{{.State.Health.Status}}' documenso
```

## Updating the Container

To update Documenso to a new version:

1. Pull the new image:

```bash
docker pull documenso/documenso:latest
```

2. Stop and remove the existing container:

```bash
docker stop documenso
docker rm documenso
```

3. Start a new container with the same configuration:

```bash
docker run -d \
  --name documenso \
  -p 3000:3000 \
  --env-file .env \
  -v /path/to/cert.p12:/opt/documenso/cert.p12:ro \
  documenso/documenso:latest
```

<Callout type="info">
  Database migrations run automatically when the container starts. Back up your database before
  upgrading.
</Callout>

## Docker Volumes for Persistence

The Documenso container is stateless by default. All persistent data is stored in the PostgreSQL database.

### Certificate Volume

If generating certificates inside the container, create a named volume to persist them:

```bash
docker volume create documenso-certs

docker run -d \
  --name documenso \
  -p 3000:3000 \
  --env-file .env \
  -v documenso-certs:/opt/documenso \
  documenso/documenso:latest
```

### Document Storage

By default, documents are stored in the database. For high-volume deployments, configure S3-compatible storage instead.

See [Storage Configuration](/docs/self-hosting/configuration/storage) for S3 setup.

## Troubleshooting

### Container fails to start

Check the container logs:

```bash
docker logs documenso
```

Common causes:

- **Missing required environment variables**: Ensure all required variables are set
- **Database connection failed**: Verify the database URL and network connectivity
- **Port already in use**: Change the host port or stop the conflicting service

### Database connection errors

Test connectivity from the Docker host:

```bash
docker run --rm postgres:15 psql "postgresql://user:password@host:5432/database" -c "SELECT 1"
```

If using Docker networks, ensure the container can reach the database:

```bash
docker run --rm --network your-network postgres:15 psql "postgresql://user:password@db-host:5432/database" -c "SELECT 1"
```

### Certificate errors

Check certificate status:

```bash
curl http://localhost:3000/api/certificate-status
```

Common issues:

- **File not found**: Verify the volume mount path
- **Permission denied**: Ensure the file is readable (UID 1001 inside the container)
- **No password**: The certificate must have a password set

Fix permissions on the host:

```bash
chmod 644 /path/to/cert.p12
chown 1001:1001 /path/to/cert.p12
```

### Emails not sending

Verify SMTP configuration:

- Check `NEXT_PRIVATE_SMTP_TRANSPORT` matches your configuration
- For `smtp-auth`, ensure host, port, username, and password are correct
- Check if your SMTP provider requires TLS (`NEXT_PRIVATE_SMTP_SECURE=true`)

### Container runs but application is inaccessible

- Verify port mapping: `-p 3000:3000`
- Check if `NEXT_PUBLIC_WEBAPP_URL` matches how you're accessing the application
- Ensure no firewall is blocking the port

---

## See Also

- [Docker Compose Deployment](/docs/self-hosting/deployment/docker-compose) - Multi-container setup with PostgreSQL included
- [Reverse Proxy Setup](/docs/self-hosting/configuration/environment#reverse-proxy) - Configure nginx, Caddy, or Traefik
- [Signing Certificate](/docs/self-hosting/configuration/signing-certificate) - Set up document signing
- [Email Configuration](/docs/self-hosting/configuration/email) - Configure SMTP providers
- [Storage Configuration](/docs/self-hosting/configuration/storage) - Set up S3-compatible storage
